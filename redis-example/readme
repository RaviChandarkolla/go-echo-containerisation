# 1. Local test
docker-compose up -d --build

# Test API
curl -X POST http://localhost:8080/score \
  -H "Content-Type: application/json" \
  -d '{"user_id":"alice"}'

curl http://localhost:8080/leaderboard

# 2. Build & Push Docker image
docker build -t yourusername/leaderboard:latest .
docker push yourusername/leaderboard:latest

# 3. Minikube setup
minikube start
eval $(minikube docker-env)

# 4. Deploy to Kubernetes
kubectl apply -f redis-deployment.yaml
kubectl apply -f app-deployment.yaml

# 5. Access
minikube service leaderboard-service --url

#=======================================================================#

# Redis commands
# 1. See all keys
KEYS *

# 2. Leaderboard (ZSET)
ZRANGE leaderboard 0 -1 WITHSCORES

# 3. User scores
GET score:alice
GET score:bob

# 4. Pretty print
ZRANGE leaderboard 0 -1 WITHSCORES | xargs -L 1 echo

# 5. Exit
QUIT
